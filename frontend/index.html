<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SoftSkills360 - Acceso</title>
    <!-- Carga Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Carga Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* Estilos personalizados para el tema oscuro */
        :root {
            --primary: #10b981; /* Esmeralda 500 */
            --background: #0f172a; /* Slate 900 */
            --card: #1e293b; /* Slate 800 */
            --text: #f8fafc; /* Slate 50 */
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background);
            color: var(--text);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 1rem;
        }
        .form-card {
            background-color: var(--card);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
            max-width: 400px;
            width: 100%;
        }
        .input-field {
            background-color: #334155; /* Slate 700 */
            border: 1px solid #475569; /* Slate 600 */
            color: var(--text);
            transition: border-color 0.3s;
        }
        .input-field:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 1px var(--primary);
        }
        .btn-primary {
            background-color: var(--primary);
            transition: background-color 0.3s, transform 0.1s;
        }
        .btn-primary:hover {
            background-color: #059669; /* Esmeralda 600 */
        }
        .btn-primary:active {
            transform: scale(0.99);
        }
        /* Estilo para los mensajes de validaciÃ³n */
        .validation-tip {
            font-size: 0.8rem;
            margin-top: 0.25rem;
            color: #f87171; /* Rojo suave */
        }
    </style>
</head>
<body>

    <div class="form-card p-8 rounded-xl">
        <h1 class="text-3xl font-extrabold text-center mb-6">SoftSkills360</h1>

        <!-- Formulario de LOGIN -->
        <!-- Cambiado button type a 'submit' para que Enter funcione con el evento submit del formulario -->
        <form id="loginForm">
            <h2 class="text-xl font-bold mb-6 text-center">Inicia SesiÃ³n</h2>
            <div class="mb-4">
                <label for="loginEmail" class="block text-sm font-medium mb-1">Correo ElectrÃ³nico</label>
                <input type="email" id="loginEmail" placeholder="tu.correo@ejemplo.com" class="input-field w-full p-3 rounded-lg" required>
            </div>
            <div class="mb-6">
                <label for="loginPassword" class="block text-sm font-medium mb-1">ContraseÃ±a</label>
                <input type="password" id="loginPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" class="input-field w-full p-3 rounded-lg" required>
            </div>
            <!-- Cambiado de type="button" a type="submit" para que Enter lo active -->
            <button type="submit" id="loginBtn" class="btn-primary w-full text-white font-semibold py-3 rounded-lg">
                Iniciar SesiÃ³n
            </button>
            <p class="mt-4 text-center text-sm">
                Â¿AÃºn no tienes cuenta? 
                <span id="toRegister" class="text-primary hover:underline cursor-pointer font-medium">RegÃ­strate aquÃ­</span>
            </p>
        </form>

        <!-- Formulario de REGISTRO (Inicialmente oculto) -->
        <form id="registerForm" style="display: none;">
            <h2 class="text-xl font-bold mb-6 text-center">Crea tu Cuenta</h2>
            <div class="mb-4">
                <label for="regName" class="block text-sm font-medium mb-1">Nombre</label>
                <input type="text" id="regName" placeholder="Tu Nombre Completo" class="input-field w-full p-3 rounded-lg" required>
            </div>
            <div class="mb-4">
                <label for="regEmail" class="block text-sm font-medium mb-1">Correo ElectrÃ³nico</label>
                <input type="email" id="regEmail" placeholder="tu.correo@ejemplo.com" class="input-field w-full p-3 rounded-lg" required>
                <p id="emailValidationTip" class="validation-tip hidden text-red-400">ğŸš¨ Por favor, introduce un correo vÃ¡lido.</p>
            </div>
            <div class="mb-6">
                <label for="regPassword" class="block text-sm font-medium mb-1">ContraseÃ±a</label>
                <input type="password" id="regPassword" placeholder="MÃ­nimo 8 caracteres, mayÃºs, nÃºmero, sÃ­mbolo" class="input-field w-full p-3 rounded-lg" required>
                <p id="passwordValidationTip" class="validation-tip hidden text-red-400"></p>
            </div>
            <!-- Cambiado de type="button" a type="submit" para que Enter lo active -->
            <button type="submit" id="registerBtn" class="btn-primary w-full text-white font-semibold py-3 rounded-lg">
                Registrarse
            </button>
            <p class="mt-4 text-center text-sm">
                Â¿Ya tienes cuenta? 
                <span id="toLogin" class="text-primary hover:underline cursor-pointer font-medium">Inicia SesiÃ³n</span>
            </p>
        </form>
    </div>

    <!-- MODAL PERSONALIZADO PARA MENSAJES (Reemplazo de alert()) -->
    <div id="messageModal" class="fixed inset-0 bg-black bg-opacity-70 hidden flex items-center justify-center p-4 z-50 transition-opacity duration-300 opacity-0">
        <div class="bg-white p-6 rounded-xl shadow-2xl max-w-sm w-full transform scale-90 transition-transform duration-300">
            <div class="flex items-center mb-4">
                <div id="modalIcon" class="w-8 h-8 rounded-full flex items-center justify-center mr-3"></div>
                <h3 id="modalTitle" class="text-xl font-bold text-gray-900"></h3>
            </div>
            <p id="modalMessage" class="text-gray-700 mb-6"></p>
            <button id="modalCloseBtn" class="bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg w-full hover:bg-gray-300 transition-colors">
                Aceptar
            </button>
        </div>
    </div>

    <script>
       Â¡Perfecto! He combinado el cÃ³digo HTML/CSS con el JavaScript que contiene las correcciones para prevenir el doble envÃ­o y un mejor manejo de errores de duplicidad en el registro.

AquÃ­ tienes el archivo completo index.html con todas las correcciones integradas en la secciÃ³n <script>:

HTML

<!DOCTYPE html>
<html lang="es">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>SoftSkills360 - Acceso</title>
Â  Â  Â  Â  <script src="https://cdn.tailwindcss.com"></script>
Â  Â  Â  Â  <script src="https://unpkg.com/lucide@latest"></script>
Â  Â  <style>
Â  Â  Â  Â  /* Estilos personalizados para el tema oscuro */
Â  Â  Â  Â  :root {
Â  Â  Â  Â  Â  Â  --primary: #10b981; /* Esmeralda 500 */
Â  Â  Â  Â  Â  Â  --background: #0f172a; /* Slate 900 */
Â  Â  Â  Â  Â  Â  --card: #1e293b; /* Slate 800 */
Â  Â  Â  Â  Â  Â  --text: #f8fafc; /* Slate 50 */
Â  Â  Â  Â  }
Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  font-family: 'Inter', sans-serif;
Â  Â  Â  Â  Â  Â  background-color: var(--background);
Â  Â  Â  Â  Â  Â  color: var(--text);
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  min-height: 100vh;
Â  Â  Â  Â  Â  Â  padding: 1rem;
Â  Â  Â  Â  }
Â  Â  Â  Â  .form-card {
Â  Â  Â  Â  Â  Â  background-color: var(--card);
Â  Â  Â  Â  Â  Â  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
Â  Â  Â  Â  Â  Â  max-width: 400px;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  }
Â  Â  Â  Â  .input-field {
Â  Â  Â  Â  Â  Â  background-color: #334155; /* Slate 700 */
Â  Â  Â  Â  Â  Â  border: 1px solid #475569; /* Slate 600 */
Â  Â  Â  Â  Â  Â  color: var(--text);
Â  Â  Â  Â  Â  Â  transition: border-color 0.3s;
Â  Â  Â  Â  }
Â  Â  Â  Â  .input-field:focus {
Â  Â  Â  Â  Â  Â  border-color: var(--primary);
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 0 1px var(--primary);
Â  Â  Â  Â  }
Â  Â  Â  Â  .btn-primary {
Â  Â  Â  Â  Â  Â  background-color: var(--primary);
Â  Â  Â  Â  Â  Â  transition: background-color 0.3s, transform 0.1s;
Â  Â  Â  Â  }
Â  Â  Â  Â  .btn-primary:hover {
Â  Â  Â  Â  Â  Â  background-color: #059669; /* Esmeralda 600 */
Â  Â  Â  Â  }
Â  Â  Â  Â  .btn-primary:active {
Â  Â  Â  Â  Â  Â  transform: scale(0.99);
Â  Â  Â  Â  }
Â  Â  Â  Â  /* Estilo para los mensajes de validaciÃ³n */
Â  Â  Â  Â  .validation-tip {
Â  Â  Â  Â  Â  Â  font-size: 0.8rem;
Â  Â  Â  Â  Â  Â  margin-top: 0.25rem;
Â  Â  Â  Â  Â  Â  color: #f87171; /* Rojo suave */
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body>

Â  Â  <div class="form-card p-8 rounded-xl">
Â  Â  Â  Â  <h1 class="text-3xl font-extrabold text-center mb-6">SoftSkills360</h1>

Â  Â  Â  Â  Â  Â  Â  Â  <form id="loginForm">
Â  Â  Â  Â  Â  Â  <h2 class="text-xl font-bold mb-6 text-center">Inicia SesiÃ³n</h2>
Â  Â  Â  Â  Â  Â  <div class="mb-4">
Â  Â  Â  Â  Â  Â  Â  Â  <label for="loginEmail" class="block text-sm font-medium mb-1">Correo ElectrÃ³nico</label>
Â  Â  Â  Â  Â  Â  Â  Â  <input type="email" id="loginEmail" placeholder="tu.correo@ejemplo.com" class="input-field w-full p-3 rounded-lg" required>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="mb-6">
Â  Â  Â  Â  Â  Â  Â  Â  <label for="loginPassword" class="block text-sm font-medium mb-1">ContraseÃ±a</label>
Â  Â  Â  Â  Â  Â  Â  Â  <input type="password" id="loginPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" class="input-field w-full p-3 rounded-lg" required>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <button type="submit" id="loginBtn" class="btn-primary w-full text-white font-semibold py-3 rounded-lg">
Â  Â  Â  Â  Â  Â  Â  Â  Iniciar SesiÃ³n
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  <p class="mt-4 text-center text-sm">
Â  Â  Â  Â  Â  Â  Â  Â  Â¿AÃºn no tienes cuenta?Â 
Â  Â  Â  Â  Â  Â  Â  Â  <span id="toRegister" class="text-primary hover:underline cursor-pointer font-medium">RegÃ­strate aquÃ­</span>
Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  </form>

Â  Â  Â  Â  Â  Â  Â  Â  <form id="registerForm" style="display: none;">
Â  Â  Â  Â  Â  Â  <h2 class="text-xl font-bold mb-6 text-center">Crea tu Cuenta</h2>
Â  Â  Â  Â  Â  Â  <div class="mb-4">
Â  Â  Â  Â  Â  Â  Â  Â  <label for="regName" class="block text-sm font-medium mb-1">Nombre</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="regName" placeholder="Tu Nombre Completo" class="input-field w-full p-3 rounded-lg" required>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="mb-4">
Â  Â  Â  Â  Â  Â  Â  Â  <label for="regEmail" class="block text-sm font-medium mb-1">Correo ElectrÃ³nico</label>
Â  Â  Â  Â  Â  Â  Â  Â  <input type="email" id="regEmail" placeholder="tu.correo@ejemplo.com" class="input-field w-full p-3 rounded-lg" required>
Â  Â  Â  Â  Â  Â  Â  Â  <p id="emailValidationTip" class="validation-tip hidden text-red-400">ğŸš¨ Por favor, introduce un correo vÃ¡lido.</p>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="mb-6">
Â  Â  Â  Â  Â  Â  Â  Â  <label for="regPassword" class="block text-sm font-medium mb-1">ContraseÃ±a</label>
Â  Â  Â  Â  Â  Â  Â  Â  <input type="password" id="regPassword" placeholder="MÃ­nimo 8 caracteres, mayÃºs, nÃºmero, sÃ­mbolo" class="input-field w-full p-3 rounded-lg" required>
Â  Â  Â  Â  Â  Â  Â  Â  <p id="passwordValidationTip" class="validation-tip hidden text-red-400"></p>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <button type="submit" id="registerBtn" class="btn-primary w-full text-white font-semibold py-3 rounded-lg">
Â  Â  Â  Â  Â  Â  Â  Â  Registrarse
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  <p class="mt-4 text-center text-sm">
Â  Â  Â  Â  Â  Â  Â  Â  Â¿Ya tienes cuenta?Â 
Â  Â  Â  Â  Â  Â  Â  Â  <span id="toLogin" class="text-primary hover:underline cursor-pointer font-medium">Inicia SesiÃ³n</span>
Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  </form>
Â  Â  </div>

Â  Â  Â  Â  <div id="messageModal" class="fixed inset-0 bg-black bg-opacity-70 hidden flex items-center justify-center p-4 z-50 transition-opacity duration-300 opacity-0">
Â  Â  Â  Â  <div class="bg-white p-6 rounded-xl shadow-2xl max-w-sm w-full transform scale-90 transition-transform duration-300">
Â  Â  Â  Â  Â  Â  <div class="flex items-center mb-4">
Â  Â  Â  Â  Â  Â  Â  Â  <div id="modalIcon" class="w-8 h-8 rounded-full flex items-center justify-center mr-3"></div>
Â  Â  Â  Â  Â  Â  Â  Â  <h3 id="modalTitle" class="text-xl font-bold text-gray-900"></h3>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <p id="modalMessage" class="text-gray-700 mb-6"></p>
Â  Â  Â  Â  Â  Â  <button id="modalCloseBtn" class="bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg w-full hover:bg-gray-300 transition-colors">
Â  Â  Â  Â  Â  Â  Â  Â  Aceptar
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <script>
Â  Â  Â  Â  // ConfiguraciÃ³n de la URL de tu API
const API_URL = "https://encuestaa.onrender.com";Â 

// --- LÃ“GICA DEL MODAL (Reemplazo de alert) ---
const modal = document.getElementById("messageModal");
const modalCloseBtn = document.getElementById("modalCloseBtn");
const modalTitle = document.getElementById("modalTitle");
const modalMessage = document.getElementById("modalMessage");
const modalIcon = document.getElementById("modalIcon");
const modalContent = modal.querySelector('div');

// Obtener los botones para deshabilitarlos
const registerBtn = document.getElementById("registerBtn");
const loginBtn = document.getElementById("loginBtn");

modalCloseBtn.onclick = () => hideMessage();
Â 
function showMessage(title, message, isSuccess = true) {
Â  Â  // Configurar el estilo del modal
Â  Â  const iconHTML = isSuccessÂ 
Â  Â  Â  Â  ? '<i data-lucide="check-circle" class="text-green-600"></i>'Â 
Â  Â  Â  Â  : '<i data-lucide="x-circle" class="text-red-600"></i>';
Â  Â  const iconBg = isSuccess ? 'bg-green-100' : 'bg-red-100';

Â  Â  modalIcon.innerHTML = iconHTML;
Â  Â  modalIcon.className = `w-8 h-8 rounded-full flex items-center justify-center mr-3 ${iconBg}`;
Â  Â  modalTitle.textContent = title;
Â  Â  modalMessage.textContent = message;

Â  Â  // Mostrar el modal con transiciÃ³n
Â  Â  modal.classList.remove('hidden');
Â  Â  setTimeout(() => {
Â  Â  Â  Â  modal.classList.add('opacity-100');
Â  Â  Â  Â  modalContent.classList.remove('scale-90');
Â  Â  }, 10);
Â  Â Â 
Â  Â  // Re-renderizar los iconos de lucide
Â  Â  lucide.createIcons();
}

function hideMessage() {
Â  Â  modal.classList.remove('opacity-100');
Â  Â  modalContent.classList.add('scale-90');
Â  Â  setTimeout(() => {
Â  Â  Â  Â  modal.classList.add('hidden');
Â  Â  }, 300);
}
Â 
// --- LÃ“GICA DE VALIDACIÃ“N ---

function isValidEmail(email) {
Â  Â  // Regex bÃ¡sico para validar el formato de correo
Â  Â  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
Â  Â  return emailRegex.test(email);
}

function getPasswordSuggestion(password) {
Â  Â  let suggestions = [];
Â  Â  if (password.length < 8) {
Â  Â  Â  Â  suggestions.push("Debe tener al menos 8 caracteres.");
Â  Â  }
Â  Â  if (!/[A-Z]/.test(password)) {
Â  Â  Â  Â  suggestions.push("Incluye al menos una letra mayÃºscula.");
Â  Â  }
Â  Â  if (!/[a-z]/.test(password)) {
Â  Â  Â  Â  suggestions.push("Incluye al menos una letra minÃºscula.");
Â  Â  }
Â  Â  if (!/\d/.test(password)) {
Â  Â  Â  Â  suggestions.push("Incluye al menos un nÃºmero.");
Â  Â  }
Â  Â  if (!/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(password)) {
Â  Â  Â  Â  suggestions.push("Incluye al menos un sÃ­mbolo (!@#$, etc.).");
Â  Â  }
Â  Â  return suggestions;
}

function isStrongPassword(password) {
Â  Â  const suggestions = getPasswordSuggestion(password);
Â  Â  return suggestions.length === 0;
}

// --- MANEJO DE VISTAS ---
document.getElementById("toRegister").onclick = () => {
Â  Â  document.getElementById("loginForm").style.display = "none";
Â  Â  document.getElementById("registerForm").style.display = "block";
};
document.getElementById("toLogin").onclick = () => {
Â  Â  document.getElementById("registerForm").style.display = "none";
Â  Â  document.getElementById("loginForm").style.display = "block";
};

// --- HANDLERS PRINCIPALES DE FORMULARIO ---

// ---- Registro Handler (CON CORRECCIÃ“N DE DOBLE ENVÃO Y MANEJO DE UNICIDAD) ----
async function handleRegister() {
Â  Â  const name = document.getElementById("regName").value;
Â  Â  const email = document.getElementById("regEmail").value.trim();
Â  Â  const password = document.getElementById("regPassword").value;
Â  Â  const emailTip = document.getElementById("emailValidationTip");
Â  Â  const passwordTip = document.getElementById("passwordValidationTip");

Â  Â  // 1. Validaciones de formato (cliente)
Â  Â  if (!isValidEmail(email)) {
Â  Â  Â  Â  emailTip.classList.remove("hidden");
Â  Â  Â  Â  return;
Â  Â  } else {
Â  Â  Â  Â  emailTip.classList.add("hidden");
Â  Â  }

Â  Â  if (!isStrongPassword(password)) {
Â  Â  Â  Â  const suggestions = getPasswordSuggestion(password);
Â  Â  Â  Â  passwordTip.innerHTML = `âš ï¸ ContraseÃ±a dÃ©bil. Sugerencias:<ul>${suggestions.map(s => `<li>${s}</li>`).join('')}</ul>`;
Â  Â  Â  Â  passwordTip.classList.remove("hidden");
Â  Â  Â  Â  return;
Â  Â  } else {
Â  Â  Â  Â  passwordTip.classList.add("hidden");
Â  Â  }

Â  Â  // --- Deshabilitar el botÃ³n para prevenir doble envÃ­o ---
Â  Â  registerBtn.disabled = true;
Â  Â  registerBtn.textContent = 'Registrando...';

Â  Â  // 2. Llamada a la API
Â  Â  try {
Â  Â  Â  Â  const res = await fetch(`${API_URL}/api/register`, {
Â  Â  Â  Â  Â  Â  method: "POST",
Â  Â  Â  Â  Â  Â  headers: { "Content-Type": "application/json" },
Â  Â  Â  Â  Â  Â  body: JSON.stringify({ name, email, password }),
Â  Â  Â  Â  });

Â  Â  Â  Â  const data = await res.json();
Â  Â  Â  Â  if (res.ok) {
Â  Â  Â  Â  Â  Â  showMessage("Registro Exitoso", "Â¡Tu cuenta ha sido creada! Por favor, inicia sesiÃ³n.", true);
Â  Â  Â  Â  Â  Â  // Cambiar a la vista de login automÃ¡ticamente
Â  Â  Â  Â  Â  Â  document.getElementById("toLogin").click();
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  // --- Manejo de error de duplicidad ---
Â  Â  Â  Â  Â  Â  let errorMessage = data.detail || "Error desconocido.";
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (typeof errorMessage === 'string') {
Â  Â  Â  Â  Â  Â  Â  Â  if (errorMessage.includes("Email already registered")) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  errorMessage = "El correo electrÃ³nico ya estÃ¡ registrado. Intenta iniciar sesiÃ³n.";
Â  Â  Â  Â  Â  Â  Â  Â  } else if (errorMessage.includes("Username already taken")) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  errorMessage = "El nombre de usuario ya estÃ¡ en uso. Elige otro.";
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  showMessage("Error al Registrar", errorMessage, false);
Â  Â  Â  Â  }
Â  Â  } catch (error) {
Â  Â  Â  Â  showMessage("Error de ConexiÃ³n", "No se pudo conectar con la API. Verifica la URL de Render.", false);
Â  Â  } finally {
Â  Â  Â  Â  // --- Volver a habilitar el botÃ³n ---
Â  Â  Â  Â  registerBtn.disabled = false;
Â  Â  Â  Â  registerBtn.textContent = 'Registrarse';
Â  Â  }
}
Â  Â Â 
// ---- Login Handler (CON CORRECCIÃ“N DE DOBLE ENVÃO) ----
async function handleLogin() {
Â  Â  const email = document.getElementById("loginEmail").value;
Â  Â  const password = document.getElementById("loginPassword").value;

    // --- Deshabilitar el botÃ³n para prevenir doble envÃ­o ---
    loginBtn.disabled = true;
    loginBtn.textContent = 'Iniciando...';

Â  Â  try {
Â  Â  Â  Â  const res = await fetch(`${API_URL}/api/login`, {
Â  Â  Â  Â  Â  Â  method: "POST",
Â  Â  Â  Â  Â  Â  headers: { "Content-Type": "application/json" },
Â  Â  Â  Â  Â  Â  body: JSON.stringify({ email, password }),
Â  Â  Â  Â  });

Â  Â  Â  Â  const data = await res.json();

Â  Â  Â  Â  if (res.ok) {
Â  Â  Â  Â  Â  Â  // Nota: Se recomienda Firebase/Firestore para persistencia
Â  Â  Â  Â  Â  Â  localStorage.setItem("token", data.token);
Â  Â  Â  Â  Â  Â  localStorage.setItem("userName", data.name);
Â  Â  Â  Â  Â  Â  showMessage("Inicio Exitoso", `Â¡Bienvenido, ${data.name}! Redirigiendo...`, true);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // PequeÃ±o retardo para que el usuario vea el mensaje
Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  window.location.href = "home.html";
Â  Â  Â  Â  Â  Â  }, 1000);

Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  showMessage("Error de Acceso", `${data.detail || "Email o contraseÃ±a incorrectos."}`, false);
Â  Â  Â  Â  }
Â  Â  } catch (error) {
Â  Â  Â  Â  showMessage("Error de ConexiÃ³n", "No se pudo conectar con la API. Verifica la URL de Render.", false);
Â  Â  } finally {
        // --- Volver a habilitar el botÃ³n ---
        loginBtn.disabled = false;
        loginBtn.textContent = 'Iniciar SesiÃ³n';
    }
}
Â  Â Â 
// --- ASIGNACIÃ“N DE HANDLERS Y SUBMIT POR ENTER (Â¡FINAL!) ---
Â  Â Â 
// 1. Asignar handlers al evento submit de los formularios
document.getElementById("registerForm").addEventListener('submit', function(e) {
Â  Â  e.preventDefault(); // Detiene el envÃ­o de formulario nativo
Â  Â  handleRegister();
});
Â  Â Â 
document.getElementById("loginForm").addEventListener('submit', function(e) {
Â  Â  e.preventDefault(); // Detiene el envÃ­o de formulario nativo
Â  Â  handleLogin();
});
Â  Â Â 
// 2. Eliminar listeners de click innecesarios (se usa el submit del formulario)
document.getElementById("registerBtn").onclick = () => { /* No hacer nada aquÃ­ */ };
document.getElementById("loginBtn").onclick = () => { /* No hacer nada aquÃ­ */ };
    </script>
</body>
</html>


